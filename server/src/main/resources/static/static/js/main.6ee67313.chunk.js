(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a(398)},165:function(e,t,a){},172:function(e,t,a){},190:function(e,t,a){},197:function(e,t,a){},343:function(e,t,a){},346:function(e,t,a){},348:function(e,t,a){},350:function(e,t,a){},355:function(e,t,a){},357:function(e,t,a){},359:function(e,t,a){},384:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(10),o=a.n(r),i=(a(165),a(53),a(19)),l=a.n(i),c=a(13),u=a(14),m=a(16),d=a(15),h=a(17),p=a(9),g=(a(114),a(60)),v=a.n(g),f=(a(172),a(408)),b=a(404),E=a(407),y="http://localhost:5000/api",S="accessToken",O=30,j=140,C=1400,N=500,w=4,k=40,P=3,A=15,M=40,L=6,U=20,T=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem(S)&&t.append("Authorization","Bearer "+localStorage.getItem(S));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then(function(e){return e.json().then(function(t){return e.ok?t:Promise.reject(t)})})};a(30);var D=a(22),I=a.n(D),x=(a(46),a(11)),F=a.n(x),z=(a(178),a(155)),B=a.n(z),R=(a(180),a(156)),J=a.n(R),Y=(a(184),a(112)),G=a.n(Y),H=(a(115),a(78)),W=a.n(H),_=(a(187),a(111)),q=a.n(_),K=(a(190),a(35)),$=(a(62),a(27)),Q=a.n($),V=(a(63),a(26)),X=a.n(V),Z=(a(197),X.a.Item),ee=Q.a.TextArea,te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateComment=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Enter your comment!"}:e.length>N?{validateStatus:"error",errorMsg:"Comment is too long (Maximum ".concat(N," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.state={hiddeComment:!0,comment:{text:""}},a.hiddeCommentForm=a.hiddeCommentForm.bind(Object(p.a)(Object(p.a)(a))),a.handleCommentChange=a.handleCommentChange.bind(Object(p.a)(Object(p.a)(a))),a.isFormInvalid=a.isFormInvalid.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"hiddeCommentForm",value:function(){this.setState({hiddeComment:!this.state.hiddeComment})}},{key:"handleCommentChange",value:function(e){var t=e.target.value;this.setState({comment:Object(K.a)({text:t},this.validateComment(t))})}},{key:"isFormInvalid",value:function(){if("success"!==this.state.comment.validateStatus)return!0}},{key:"render",value:function(){return s.a.createElement("div",{className:"new-comment-container"},s.a.createElement("div",{className:"new-comment-content"},s.a.createElement("span",{className:"total-comments"},this.props.commentNumber," comments"),s.a.createElement("span",{className:"separator"},"|"),s.a.createElement("span",{className:"time-left"},s.a.createElement("a",{className:"show-comment-form",onClick:this.hiddeCommentForm},s.a.createElement(F.a,{type:"edit"}))),s.a.createElement("div",{className:"new-comment-form",hidden:this.state.hiddeComment},s.a.createElement(X.a,{onSubmit:this.props.handleCommentSubmit,className:"create-comment-form"},s.a.createElement(Z,{validateStatus:this.state.comment.validateStatus,className:"create-comment-form-Item"},s.a.createElement(ee,{placeholder:"Enter your comment",style:{fontSize:"16px"},autosize:{minRows:3,maxRows:6},name:"Comment",value:this.state.comment.text,onChange:this.handleCommentChange})),s.a.createElement(Z,{"create-comment-form-Item":!0},s.a.createElement(I.a,{onClick:this.hiddeCommentForm,htmlType:"submit",type:"primary",size:"small",disabled:this.isFormInvalid()},"Sumbmit"))))))}}]),t}(n.Component),ae=a(403),ne=["#F44336","#e91e63","#9c27b0","#673ab7","#ff9800","#ff5722","#795548","#607d8b","#3f51b5","#2196F3","#00bcd4","#009688","#2196F3","#32c787","#00BCD4","#ff5652","#ffc107","#ff85af","#FF9800","#39bbb0","#4CAF50","#ffeb3b","#ffc107"];function se(e){e=e.substr(0,6);for(var t=0,a=0;a<e.length;a++)t=31*t+e.charCodeAt(a);var n=Math.abs(t%ne.length);return ne[n]}var re=q.a.Panel,oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={hiddeComment:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"shouldHideDeletePostIcon",value:function(){return!this.props.currentUser||this.props.post.createdBy.id!==this.props.currentUser.id}},{key:"shouldHideDeleteCommentIcon",value:function(e){return!this.props.currentUser||e.createBy.id!==this.props.currentUser.id}},{key:"render",value:function(){var e=this,t=[];return this.props.post.comments.forEach(function(a,n){t.push(s.a.createElement("div",{className:"post-comments-text",key:a.id},s.a.createElement(ae.a,{className:"creator-link",to:"/users/".concat(a.createBy.username)},a.createBy.username,":\xa0\xa0"),a.text,s.a.createElement("a",{className:"comment-delete-icon",onClick:function(t){return e.props.handleCommentDelete(t,a.id)},hidden:e.shouldHideDeleteCommentIcon(a)},"-")))}),s.a.createElement("div",{className:"post-content"},s.a.createElement("div",{className:"post-header"},s.a.createElement(B.a,null,s.a.createElement(G.a,{span:22},s.a.createElement("div",{className:"post-creator-info"},s.a.createElement(ae.a,{className:"creator-link",to:"/users/".concat(this.props.post.createdBy.username)},s.a.createElement(W.a,{className:"post-creator-avatar",style:{backgroundColor:se(this.props.post.createdBy.name)}},this.props.post.createdBy.name[0].toUpperCase()),s.a.createElement("span",{className:"post-creator-name"},this.props.post.createdBy.name),s.a.createElement("span",{className:"post-creator-username"},"@",this.props.post.createdBy.username),s.a.createElement("span",{className:"post-creation-date"},function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return t.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a]+" "+n+" - "+t.getHours()+":"+t.getMinutes()}(this.props.post.creationDateTime))))),s.a.createElement(G.a,{span:2},s.a.createElement("div",{className:"delete-post-icon",hidden:this.shouldHideDeletePostIcon()},s.a.createElement(J.a,{title:"Are you sure delete this post?",onConfirm:this.props.handlePostDelete,okText:"Yes",cancelText:"No"},s.a.createElement("a",{href:"#"},s.a.createElement(F.a,{type:"close"})))))),s.a.createElement("div",{className:"post-topic"},s.a.createElement(q.a,{bordered:!1,defaultActiveKey:["1"]},s.a.createElement(re,{header:this.props.post.topic,showArrow:!1},this.props.post.description)))),s.a.createElement("div",{className:"post-comments"},t),s.a.createElement("div",{className:"post-footer"},s.a.createElement(te,{commentNumber:t.length,currentComment:this.props.currentComment,handleCommentSubmit:this.props.handleCommentSubmit})))}}]),t}(n.Component),ie=(a(340),a(157)),le=a.n(ie);function ce(e){var t=s.a.createElement(F.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return s.a.createElement(le.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(343);var ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={posts:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,currentComments:[],isLoading:!1},a.loadPostList=a.loadPostList.bind(Object(p.a)(Object(p.a)(a))),a.handleLoadMore=a.handleLoadMore.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"loadPostList",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;this.props.username?"USER_CREATED_POSTS"===this.props.type?e=function(e,t,a){return T({url:y+"/users/"+e+"/posts?page="+(t=t||0)+"&size="+(a=a||O),method:"GET"})}(this.props.username,a,n):"USER_COMMENTED_POSTS"===this.props.type&&(e=function(e,t,a){return T({url:y+"/users/"+e+"/comments?page="+(t=t||0)+"&size="+(a=a||O),method:"GET"})}(this.props.username,a,n)):e=function(e,t){return T({url:y+"/posts?page="+(e=e||0)+"&size="+(t=t||O),method:"GET"})}(a,n),e&&(this.setState({isLoading:!0}),e.then(function(e){var a=t.state.posts.slice(),n=t.state.currentComments.slice();t.setState({posts:a.concat(e.content),page:e.page,size:e.size,totalElements:e.totalElements,totalPages:e.totalPages,last:e.last,currentComments:n.concat(Array(e.content.length).fill(null)),isLoading:!1})}).catch(function(e){t.setState({isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.loadPostList()}},{key:"componentDidUpdate",value:function(e){this.props.isAuthenticated!==e.isAuthenticated&&(this.setState({posts:[],page:0,size:10,totalElements:0,totalPages:0,last:!0,currentComments:[],isLoading:!1}),this.loadPostList())}},{key:"handleLoadMore",value:function(){this.loadPostList(this.state.page+1)}},{key:"handlePostDelete",value:function(e,t){var a=this;if(e.preventDefault(),!this.props.isAuthenticated)return this.props.history.push("/login"),void l.a.info({message:"Posting App",description:"Please login to comment."});(function(e){return T({url:y+"/posts/"+e,method:"DELETE"})})(this.state.posts[t].id).then(function(e){var n=a.state.posts.slice(0,t);n=n.concat(a.state.posts.slice(t+1)),a.setState({posts:n})}).catch(function(e){401===e.status?a.props.handleLogout("/login","error","You have been logged out. Please login to comment"):l.a.error({message:"Posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleCommentSubmit",value:function(e,t){var a=this;if(e.preventDefault(),!this.props.isAuthenticated)return this.props.history.push("/login"),void l.a.info({message:"Posting App",description:"Please login to comment."});var n=this.state.posts[t],s=e.target.Comment.value;(function(e){return T({url:y+"/posts/"+e.postId+"/comments",method:"POST",body:JSON.stringify(e)})})({postId:n.id,text:s}).then(function(e){console.log(e);var n=a.state.posts.slice();n[t]=e,a.setState({posts:n})}).catch(function(e){401===e.status?a.props.handleLogout("/login","error","You have been logged out. Please login to comment"):l.a.error({message:"Posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleCommentDelete",value:function(e,t,a){var n=this;if(e.preventDefault(),!this.props.isAuthenticated)return this.props.history.push("/login"),void l.a.info({message:"Posting App",description:"Please login to comment."});(function(e,t){return T({url:y+"/posts/"+e+"/comments/"+t,method:"DELETE"})})(this.state.posts[t].id,a).then(function(e){var a=n.state.posts.slice();a[t]=e,n.setState({posts:a})}).catch(function(e){401===e.status?n.props.handleLogout("/login","error","You have been logged out. Please login to comment"):l.a.error({message:"Posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"render",value:function(){var e=this,t=[];return this.state.posts.forEach(function(a,n){t.push(s.a.createElement(oe,{key:a.id,post:a,currentUser:e.props.currentUser,handleCommentSubmit:function(t){return e.handleCommentSubmit(t,n)},handlePostDelete:function(t){return e.handlePostDelete(t,n)},handleCommentDelete:function(t,a){return e.handleCommentDelete(t,n,a)}}))}),s.a.createElement("div",{className:"posts-container"},t,this.state.isLoading||0!==this.state.posts.length?null:s.a.createElement("div",{className:"no-posts-found"},s.a.createElement("span",null,"No Posts Found.")),this.state.isLoading||this.state.last?null:s.a.createElement("div",{className:"load-more-posts"},s.a.createElement(I.a,{type:"dashed",onClick:this.handleLoadMore,disabled:this.state.isLoading},s.a.createElement(F.a,{type:"plus"})," Load more")),this.state.isLoading?s.a.createElement(ce,null):null)}}]),t}(n.Component),me=Object(E.a)(ue),de=(a(346),X.a.Item),he=Q.a.TextArea,pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateTopic=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your topic!"}:e.length>j?{validateStatus:"error",errorMsg:"Topic is too long (Maximum ".concat(j," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.validateDescription=function(e){return e.length>C?{validateStatus:"error",errorMsg:"Description is too long (Maximum ".concat(C," characters allowed)")}:{validateStatus:"success",errorMsg:null}},a.state={topic:{text:""},description:{text:""}},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.handleTopicChange=a.handleTopicChange.bind(Object(p.a)(Object(p.a)(a))),a.handleDescriptionChange=a.handleDescriptionChange.bind(Object(p.a)(Object(p.a)(a))),a.isFormInvalid=a.isFormInvalid.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return T({url:y+"/posts",method:"POST",body:JSON.stringify(e)})}({topic:this.state.topic.text,description:this.state.description.text}).then(function(e){t.props.history.push("/")}).catch(function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create post."):l.a.error({message:"posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"handleTopicChange",value:function(e){var t=e.target.value;this.setState({topic:Object(K.a)({text:t},this.validateTopic(t))})}},{key:"handleDescriptionChange",value:function(e){var t=e.target.value;this.setState({description:Object(K.a)({text:t},this.validateDescription(t))})}},{key:"isFormInvalid",value:function(){if("success"!==this.state.topic.validateStatus)return!0}},{key:"render",value:function(){return s.a.createElement("div",{className:"new-post-container"},s.a.createElement("h1",{className:"page-title"},"Create post"),s.a.createElement("div",{className:"new-post-content"},s.a.createElement(X.a,{onSubmit:this.handleSubmit,className:"create-post-form"},s.a.createElement(de,{validateStatus:this.state.topic.validateStatus,help:this.state.topic.errorMsg,className:"post-form-row"},s.a.createElement(Q.a,{placeholder:"Enter your topic",style:{fontSize:"16px"},size:"large",name:"topic",value:this.state.topic.text,onChange:this.handleTopicChange})),s.a.createElement(de,{validateStatus:this.state.description.validateStatus,help:this.state.description.errorMsg,className:"post-form-row"},s.a.createElement(he,{placeholder:"Enter your description",style:{fontSize:"16px"},autosize:{minRows:5,maxRows:8},name:"description",value:this.state.description.text,onChange:this.handleDescriptionChange})),s.a.createElement(de,{className:"post-form-row"},s.a.createElement(I.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-post-form-button"},"Create post")))))}}]),t}(n.Component),ge=(a(348),X.a.Item),ve=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=X.a.create()(fe);return s.a.createElement("div",{className:"login-container"},s.a.createElement("h1",{className:"page-title"},"Login"),s.a.createElement("div",{className:"login-content"},s.a.createElement(e,{onLogin:this.props.onLogin})))}}]),t}(n.Component),fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){e||function(e){return T({url:y+"/auth/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},a)).then(function(e){localStorage.setItem(S,e.accessToken),t.props.onLogin()}).catch(function(e){401===e.status?l.a.error({message:"Posting App",description:"Your Username or Password is incorrect. Please try again!"}):l.a.error({message:"Posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement(X.a,{onSubmit:this.handleSubmit,className:"login-form"},s.a.createElement(ge,null,e("usernameOrEmail",{rules:[{required:!0,message:"Please input your username or email!"}]})(s.a.createElement(Q.a,{prefix:s.a.createElement(F.a,{type:"user"}),size:"large",name:"usernameOrEmail",placeholder:"Username or Email"}))),s.a.createElement(ge,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(s.a.createElement(Q.a,{prefix:s.a.createElement(F.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),s.a.createElement(ge,null,s.a.createElement(I.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button"},"Login"),"Or ",s.a.createElement(ae.a,{to:"/signup"},"register now!")))}}]),t}(n.Component),be=ve,Ee=a(77),ye=(a(350),X.a.Item),Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).validateName=function(e){return e.length<w?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(w," characters needed.)")}:e.length>k?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(k," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateEmail=function(e){return e?RegExp("[^@ ]+@[^@ ]+\\.[^@ ]+").test(e)?e.length>M?{validateStatus:"error",errorMsg:"Email is too long (Maximum ".concat(M," characters allowed)")}:{validateStatus:null,errorMsg:null}:{validateStatus:"error",errorMsg:"Email not valid"}:{validateStatus:"error",errorMsg:"Email may not be empty"}},a.validateUsername=function(e){return e.length<P?{validateStatus:"error",errorMsg:"Username is too short (Minimum ".concat(P," characters needed.)")}:e.length>A?{validationStatus:"error",errorMsg:"Username is too long (Maximum ".concat(A," characters allowed.)")}:{validateStatus:null,errorMsg:null}},a.validatePassword=function(e){return e.length<L?{validateStatus:"error",errorMsg:"Password is too short (Minimum ".concat(L," characters needed.)")}:e.length>U?{validationStatus:"error",errorMsg:"Password is too long (Maximum ".concat(U," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={name:{value:""},username:{value:""},email:{value:""},password:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.validateUsernameAvailability=a.validateUsernameAvailability.bind(Object(p.a)(Object(p.a)(a))),a.validateEmailAvailability=a.validateEmailAvailability.bind(Object(p.a)(Object(p.a)(a))),a.isFormInvalid=a.isFormInvalid.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,s=a.value;this.setState(Object(Ee.a)({},n,Object(K.a)({value:s},t(s))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return T({url:y+"/auth/signup",method:"POST",body:JSON.stringify(e)})}({name:this.state.name.value,email:this.state.email.value,username:this.state.username.value,password:this.state.password.value}).then(function(e){l.a.success({message:"Posting App",description:"Thank you! You're successfully registered. Please Login to continue!"}),t.props.history.push("/login")}).catch(function(e){l.a.error({message:"Posting App",description:e.message||"Sorry! Something went wrong. Please try again!"})})}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.username.validateStatus&&"success"===this.state.email.validateStatus&&"success"===this.state.password.validateStatus)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"signup-container"},s.a.createElement("h1",{className:"page-title"},"Sign Up"),s.a.createElement("div",{className:"signup-content"},s.a.createElement(X.a,{onSubmit:this.handleSubmit,className:"signup-form"},s.a.createElement(ye,{label:"Full Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},s.a.createElement(Q.a,{size:"large",name:"name",autoComplete:"off",placeholder:"Your full name",value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateName)}})),s.a.createElement(ye,{label:"Username",hasFeedback:!0,validateStatus:this.state.username.validateStatus,help:this.state.username.errorMsg},s.a.createElement(Q.a,{size:"large",name:"username",autoComplete:"off",placeholder:"A unique username",value:this.state.username.value,onBlur:this.validateUsernameAvailability,onChange:function(t){return e.handleInputChange(t,e.validateUsername)}})),s.a.createElement(ye,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus,help:this.state.email.errorMsg},s.a.createElement(Q.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:"Your email",value:this.state.email.value,onBlur:this.validateEmailAvailability,onChange:function(t){return e.handleInputChange(t,e.validateEmail)}})),s.a.createElement(ye,{label:"Password",validateStatus:this.state.password.validateStatus,help:this.state.password.errorMsg},s.a.createElement(Q.a,{size:"large",name:"password",type:"password",autoComplete:"off",placeholder:"A password between 6 to 20 characters",value:this.state.password.value,onChange:function(t){return e.handleInputChange(t,e.validatePassword)}})),s.a.createElement(ye,null,s.a.createElement(I.a,{type:"primary",htmlType:"submit",size:"large",className:"signup-form-button",disabled:this.isFormInvalid()},"Sign up"),"Already registed? ",s.a.createElement(ae.a,{to:"/login"},"Login now!")))))}},{key:"validateUsernameAvailability",value:function(){var e,t=this,a=this.state.username.value,n=this.validateUsername(a);"error"!==n.validateStatus?(this.setState({username:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,T({url:y+"/user/checkUsernameAvailability?username="+e,method:"GET"})).then(function(e){e.available?t.setState({username:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({username:{value:a,validateStatus:"error",errorMsg:"This username is already taken"}})}).catch(function(e){t.setState({username:{value:a,validateStatus:"success",errorMsg:null}})})):this.setState({username:Object(K.a)({value:a},n)})}},{key:"validateEmailAvailability",value:function(){var e,t=this,a=this.state.email.value,n=this.validateEmail(a);"error"!==n.validateStatus?(this.setState({email:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,T({url:y+"/user/checkEmailAvailability?email="+e,method:"GET"})).then(function(e){e.available?t.setState({email:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({email:{value:a,validateStatus:"error",errorMsg:"This Email is already registered"}})}).catch(function(e){t.setState({email:{value:a,validateStatus:"success",errorMsg:null}})})):this.setState({email:Object(K.a)({value:a},n)})}}]),t}(n.Component),Oe=(a(352),a(113)),je=a.n(Oe),Ce=(a(355),a(357),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"page-not-found"},s.a.createElement("h1",{className:"title"},"404"),s.a.createElement("div",{className:"desc"},"The Page you're looking for was not found."),s.a.createElement(ae.a,{to:"/"},s.a.createElement(I.a,{className:"go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),Ne=(a(359),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"server-error-page"},s.a.createElement("h1",{className:"server-error-title"},"500"),s.a.createElement("div",{className:"server-error-desc"},"Oops! Something went wrong at our Server. Why don't you go back?"),s.a.createElement(ae.a,{to:"/"},s.a.createElement(I.a,{className:"server-error-go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),we=je.a.TabPane,ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={user:null,isLoading:!1},a.loadUserProfile=a.loadUserProfile.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"loadUserProfile",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return T({url:y+"/users/"+e,method:"GET"})}(e).then(function(e){t.setState({user:e,isLoading:!1})}).catch(function(e){404===e.status?t.setState({notFound:!0,isLoading:!1}):t.setState({serverError:!0,isLoading:!1})})}},{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.loadUserProfile(e)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.username!==e.match.params.username&&this.loadUserProfile(e.match.params.username)}},{key:"render",value:function(){if(this.state.isLoading)return s.a.createElement(ce,null);if(this.state.notFound)return s.a.createElement(Ce,null);if(this.state.serverError)return s.a.createElement(Ne,null);return s.a.createElement("div",{className:"profile"},this.state.user?s.a.createElement("div",{className:"user-profile"},s.a.createElement("div",{className:"user-details"},s.a.createElement("div",{className:"user-avatar"},s.a.createElement(W.a,{className:"user-avatar-circle",style:{backgroundColor:se(this.state.user.name)}},this.state.user.name[0].toUpperCase())),s.a.createElement("div",{className:"user-summary"},s.a.createElement("div",{className:"full-name"},this.state.user.name),s.a.createElement("div",{className:"username"},"@",this.state.user.username),s.a.createElement("div",{className:"user-joined"},"Joined ",function(e){var t=new Date(e),a=t.getMonth(),n=t.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+n}(this.state.user.joinedAt)))),s.a.createElement("div",{className:"user-post-details"},s.a.createElement(je.a,{defaultActiveKey:"1",animated:!1,tabBarStyle:{textAlign:"center"},size:"large",className:"profile-tabs"},s.a.createElement(we,{tab:"".concat(this.state.user.postCount," Posts"),key:"1"},s.a.createElement(me,{username:this.props.match.params.username,type:"USER_CREATED_POSTS",isAuthenticated:this.props.isAuthenticated,currentUser:this.props.currentUser})),s.a.createElement(we,{tab:"".concat(this.state.user.commentCount," Comments"),key:"2"},s.a.createElement(me,{username:this.props.match.params.username,type:"USER_COMMENTED_POSTS",isAuthenticated:this.props.isAuthenticated,currentUser:this.props.currentUser}))))):null)}}]),t}(n.Component),Pe=(a(375),a(158)),Ae=a.n(Pe),Me=(a(378),a(29)),Le=a.n(Me),Ue=(a(384),v.a.Header),Te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleMenuClick=a.handleMenuClick.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){var e;return e=this.props.currentUser?[s.a.createElement(Le.a.Item,{key:"/"},s.a.createElement(ae.a,{to:"/"},s.a.createElement(F.a,{type:"home",className:"nav-icon"}))),s.a.createElement(Le.a.Item,{key:"/post/new"},s.a.createElement(ae.a,{to:"/post/new"},s.a.createElement(F.a,{type:"plus",className:"nav-icon"}))),s.a.createElement(Le.a.Item,{key:"/profile",className:"profile-menu"},s.a.createElement(De,{currentUser:this.props.currentUser,handleMenuClick:this.handleMenuClick}))]:[s.a.createElement(Le.a.Item,{key:"/login"},s.a.createElement(ae.a,{to:"/login"},"Login")),s.a.createElement(Le.a.Item,{key:"/signup"},s.a.createElement(ae.a,{to:"/signup"},"Signup"))],s.a.createElement(Ue,{className:"app-header"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"app-title"},s.a.createElement(ae.a,{to:"/"},"Posting App")),s.a.createElement(Le.a,{className:"app-menu",mode:"horizontal",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)))}}]),t}(n.Component);function De(e){var t=s.a.createElement(Le.a,{onClick:e.handleMenuClick,className:"profile-dropdown-menu"},s.a.createElement(Le.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},s.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name),s.a.createElement("div",{className:"username-info"},"@",e.currentUser.username)),s.a.createElement(Le.a.Divider,null),s.a.createElement(Le.a.Item,{key:"profile",className:"dropdown-item"},s.a.createElement(ae.a,{to:"/users/".concat(e.currentUser.username)},"Profile")),s.a.createElement(Le.a.Item,{key:"logout",className:"dropdown-item"},"Logout"));return s.a.createElement(Ae.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},s.a.createElement("a",{className:"ant-dropdown-link"},s.a.createElement(F.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",s.a.createElement(F.a,{type:"down"})))}var Ie=Object(E.a)(Te),xe=a(159),Fe=a(405),ze=function(e){var t=e.component,a=e.authenticated,n=Object(xe.a)(e,["component","authenticated"]);return s.a.createElement(b.a,Object.assign({},n,{render:function(e){return a?s.a.createElement(t,Object.assign({},n,e)):s.a.createElement(Fe.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Be=v.a.Content,Re=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={currentUser:null,isAuthenticated:!1,isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(p.a)(Object(p.a)(a))),a.loadCurrentUser=a.loadCurrentUser.bind(Object(p.a)(Object(p.a)(a))),a.handleLogin=a.handleLogin.bind(Object(p.a)(Object(p.a)(a))),l.a.config({placement:"topRight",top:70,duration:3}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem(S)?T({url:y+"/user/me",method:"GET"}):Promise.reject("No access token set.")).then(function(t){e.setState({currentUser:t,isAuthenticated:!0,isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.loadCurrentUser()}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem(S),this.setState({currentUser:null,isAuthenticated:!1}),this.props.history.push(e),l.a[t]({message:"Polling App",description:a})}},{key:"handleLogin",value:function(){l.a.success({message:"Polling App",description:"You're successfully logged in."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return this.state.isLoading?s.a.createElement(ce,null):s.a.createElement(v.a,{className:"app-container"},s.a.createElement(Ie,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),s.a.createElement(Be,{className:"app-content"},s.a.createElement("div",{className:"container"},s.a.createElement(f.a,null,s.a.createElement(b.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(me,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser,handleLogout:e.handleLogout},t))}}),s.a.createElement(b.a,{path:"/post/new",render:function(t){return s.a.createElement(pe,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser,handleLogout:e.handleLogout},t))}}),s.a.createElement(b.a,{path:"/login",render:function(t){return s.a.createElement(be,Object.assign({onLogin:e.handleLogin},t))}}),s.a.createElement(b.a,{path:"/signup",component:Se}),s.a.createElement(b.a,{path:"/users/:username",render:function(t){return s.a.createElement(ke,Object.assign({isAuthenticated:e.state.isAuthenticated,currentUser:e.state.currentUser},t))}}),s.a.createElement(ze,{authenticated:this.state.isAuthenticated,path:"/post/new",component:pe,handleLogout:this.handleLogout}),s.a.createElement(b.a,{component:Ce})))))}}]),t}(n.Component),Je=Object(E.a)(Re),Ye=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var He=a(406);o.a.render(s.a.createElement(He.a,null,s.a.createElement(Je,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Ye?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ge(t,e)})}}()}},[[160,2,1]]]);
//# sourceMappingURL=main.6ee67313.chunk.js.map